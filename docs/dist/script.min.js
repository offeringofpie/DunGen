!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new(function(){function t(){this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=window.innerWidth,this.height=window.innerHeight,this.img=new Image,this.gridSize=98,this.cellSize={w:this.width/this.gridSize,h:this.height/this.gridSize*16/9},this.rooms=new Array,this.grid=new Array}return t.prototype.resize=function(t,e){void 0===t&&(t=window.innerWidth),void 0===e&&(e=window.innerHeight),this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e},t.prototype.buildGrid=function(){for(var t=0;t<r.gridSize;++t){this.grid[t]=new Array;for(var e=0;e<r.gridSize;++e)this.grid[t][e]=0}},t.prototype.loadImg=function(t,e){var i=this,r=new Image;r.src=t,r.onload=function(){i.img=r,e()}},t}());e.default=r},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(3)),o=r(i(6)),a=r(i(0)),u=function(){function t(){var t=this;this.dungeon=null,this.animate=new o.default,a.default.resize(),a.default.loadImg("./img/dungeon.png",function(){t.init()})}return t.prototype.init=function(){var t=this;a.default.buildGrid(),this.dungeon=new n.default,this.animate.update=function(){t.dungeon.draw()},this.animate.start()},t}();e.default=u},function(t,e,i){t.exports=i(9)},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=r(i(0)),a=r(i(5)),u=function(){function t(){this.ctx=o.default.canvas.getContext("2d"),this.pattern=new a.default,this.rooms=new Array,this.init()}return t.prototype.init=function(){this.setRooms()},t.prototype.setRooms=function(t,e,i){for(var r=this,a=e||40,u=i||100,s=t||10,l=0;l<u;l++){for(var d=Math.floor(n.lerp(10,a)),f=Math.floor(n.lerp(10,a)),c=Math.floor(2*n.lerp(0,(o.default.gridSize-d)/2)+1),h=Math.floor(2*n.lerp(0,(o.default.gridSize-f)/2)+1),p=!1,g={x:c,y:h,w:d,h:f,c:{x:Math.ceil(c+d/2),y:Math.ceil(h+f/2)}},m=0;m<o.default.rooms.length;m++)n.intersect(g,o.default.rooms[m])&&(p=!0);!p&&o.default.rooms.length<s&&o.default.rooms.push(g)}o.default.rooms.forEach(function(t,e){for(var i=t.y;i<t.y+t.h;i++)for(var n=i==t.y?-1:i==t.y+t.h-1?1:0,a=t.x;a<t.x+t.w;a++){var u=a==t.x?-1:a==t.x+t.w-1?1:0;o.default.grid[i][a]={type:"floor",room:!0,edge:[n,u],index:e}}r._carve(o.default.rooms[Math.max(0,e-1)],t)}),this.addWalls()},t.prototype._isFloor=function(t,e){return"floor"===o.default.grid[t][e].type},t.prototype._isEdge=function(t,e){return void 0!==o.default.grid[t][e].edge},t.prototype._isValid=function(t,e){return void 0!==o.default.grid[t]&&void 0!==o.default.grid[t][e]},t.prototype._carve=function(t,e){for(var i=t.c,r=e.c,n=Math.min(r.y,i.y);n<=Math.max(r.y,i.y);n++)o.default.grid[n][r.x].room||(o.default.grid[n][r.x]={type:"floor",room:!1,edge:[2,0]});for(var a=Math.min(i.x,r.x);a<=Math.max(i.x,r.x);a++)o.default.grid[i.y][a].room||(o.default.grid[i.y][a]={type:"floor",room:!1,edge:[0,2]})},t.prototype.addWalls=function(){for(var t=this,e=0;e<o.default.gridSize;++e)for(var i=0;i<o.default.gridSize;++i){if(this._isEdge(e,i))[[e-1,i-1],[e-1,i],[e-1,i+1],[e,i-1],[e,i],[e,i+1],[e+1,i-1],[e+1,i],[e+1,i+1]].forEach(function(e){t._isValid(e[0],e[1])&&!t._isFloor(e[0],e[1])&&(o.default.grid[e[0]][e[1]]={type:"wall"})})}},t.prototype.draw=function(){for(var t=0;t<o.default.gridSize;++t)for(var e=0;e<o.default.gridSize;++e){o.default.grid[t][e].room;var i=o.default.grid[t][e].type;"floor"==i?(this.ctx.fillStyle=this.pattern.get("floor"),this.ctx.fillRect(o.default.cellSize.w/2*e,o.default.cellSize.h/2*t,o.default.cellSize.w/2,o.default.cellSize.h/2)):"corridor"==i?(this.ctx.fillStyle="#000000",this.ctx.fillRect(o.default.cellSize.w/2*e,o.default.cellSize.h/2*t,o.default.cellSize.w/2,o.default.cellSize.h/2)):"wall"==i&&(this.ctx.fillStyle=this.pattern.get("wall"),this.ctx.fillRect(o.default.cellSize.w/2*e,o.default.cellSize.h/2*t,o.default.cellSize.w/2,o.default.cellSize.h/2))}},t}();e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"Random",function(){return r}),i.d(e,"boxMuller",function(){return n}),i.d(e,"closest",function(){return o}),i.d(e,"lerp",function(){return a}),i.d(e,"distance",function(){return u}),i.d(e,"intersect",function(){return s});class r{constructor(t=Math.random()){this.input=t,this.seed=this._convert(t),this.seed<=0&&(this.seed+=2147483646)}_convert(t){return t.toString().split("").map((e,i)=>t.toString().charCodeAt(i)).join("")%2147483647}getSeed(){return this.input}setSeed(t){this.input=t,this.seed=this._convert(t)}next(){return this.seed=16807*this.seed%2147483647,this.seed}nextFloat(){return(this.next()-1)/2147483646}}function n(t){const e=Math.random(),i=Math.random();return Math.max(Math.min(Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*i),t),-t)}function o(t,e){return Math.ceil(t/e)*e}function a(t,e,i=Math.random()){return(1-i)*t+i*e}function u([t,e],[i,r]){var n=t-i,o=e-r;return sqrt(n*n+o*o)}function s(t,e,i=0){return void 0!==e&&!(e.x>t.x+t.w+i||e.x+e.w+i<t.x||e.y>t.y+t.h+i||e.y+e.h+i<t.y)}},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o={wall:[80,0],floor:[160,96]},a=function(){function t(t,e,i,r){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.outerCtx=e||n.default.ctx,this.img=t||n.default.img,this.w=i||16,this.h=r||16,this.sprite=o,this.canvas.width=this.w,this.canvas.height=this.h}return t.prototype.get=function(t){var e=t||"floor";return this.ctx.drawImage(this.img,this.sprite[e][0],this.sprite[e][1],this.w,this.h,0,0,this.w,this.h),this.outerCtx.createPattern(this.canvas,"repeat")},t}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t=1e3/120);var e=this;this.frame=0,this.lastTime=0,this.framerate=t,this.loop=function(i){e.frame+=Math.round((i-e.lastTime)/t),e.lastTime=i,e.update(),e.start()}}return t.prototype.stop=function(){cancelAnimationFrame(this.loop)},t.prototype.start=function(){requestAnimationFrame(this.loop)},t}();e.default=r},function(t,e,i){},function(t,e,i){t.exports=i.p+"img/dungeon.png"},function(t,e,i){"use strict";i.r(e);var r=i(1);new(i.n(r).a);i(7),i(8)}]);