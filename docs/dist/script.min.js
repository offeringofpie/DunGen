!function(t){function e(e){for(var r,a,u=e[0],s=e[1],d=e[2],f=0,h=[];f<u.length;f++)a=u[f],n[a]&&h.push(n[a][0]),n[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(l&&l(e);h.length;)h.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],r=!0,u=1;u<i.length;u++){var s=i[u];0!==n[s]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var r={},n={1:0},o=[];function a(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=r,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(i,r,function(e){return t[e]}.bind(null,r));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var l=s;o.push([37,0]),i()}({11:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(40)),o=new(function(){function t(){this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=window.innerWidth,this.height=window.innerHeight,this.img=new Image,this.gridSize=98,this.cellSize={w:this.width/this.gridSize*9/16,h:this.height/this.gridSize},this.rooms=new Array,this.grid=new Array,this.control=new n.default,this.pos={buttons:[1,2,4,6,5,3],x:0,y:0,w:0,alt:!1,shift:!1,ctrl:!1,buttonLastRaw:0,buttonRaw:0,over:!1,mouseX:0,mouseY:0}}return t.prototype.resize=function(t,e){void 0===t&&(t=window.innerWidth),void 0===e&&(e=window.innerHeight),this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e},t.prototype.buildGrid=function(){for(var t=0;t<o.gridSize;++t){this.grid[t]=new Array;for(var e=0;e<o.gridSize;++e)this.grid[t][e]=0}},t.prototype.loadImg=function(t,e){var i=this,r=new Image;r.src=t,r.onload=function(){i.img=r,e()}},t}());e.default=o},36:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(38)),o=r(i(65)),a=r(i(11)),u=function(){function t(){var t=this;this.dungeon=null,this.animate=new o.default,a.default.resize(),a.default.loadImg("./img/dungeon.png",function(){t.init()})}return t.prototype.init=function(){var t=this;this.dungeon=new n.default,this.dungeon.init(),this.animate.update=function(){t.dungeon.draw()},this.animate.start()},t.prototype.restart=function(){this.dungeon.restart()},t}();e.default=u},37:function(t,e,i){t.exports=i(68)},38:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(39),o=r(i(11)),a=r(i(64)),u=function(){function t(){this.ctx=o.default.canvas.getContext("2d"),this.pattern=new a.default,this.rooms=new Array}return t.prototype.init=function(){o.default.buildGrid(),this.setRooms()},t.prototype.restart=function(){this.init()},t.prototype.setRooms=function(t,e,i){for(var r=this,a=e||40,u=i||100,s=t||10,d=0;d<u;d++){for(var l=Math.floor(n.lerp(10,a)),f=Math.floor(n.lerp(10,a)),h=Math.floor(2*n.lerp(0,(o.default.gridSize-l)/2)+1),c=Math.floor(2*n.lerp(0,(o.default.gridSize-f)/2)+1),p=!1,g={x:h,y:c,w:l,h:f,c:{x:Math.ceil(h+l/2),y:Math.ceil(c+f/2)}},v=0;v<o.default.rooms.length;v++)n.intersect(g,o.default.rooms[v])&&(p=!0);!p&&o.default.rooms.length<s&&o.default.rooms.push(g)}o.default.rooms.forEach(function(t,e){for(var i=t.y;i<t.y+t.h-1;i++)for(var n=i==t.y?-1:i==t.y+t.h-1?1:0,a=t.x;a<t.x+t.w-1;a++){var u=a==t.x?-1:a==t.x+t.w-1?1:0;o.default.grid[i][a]={type:"floor",room:!0,edge:[n,u],index:e}}r._carve(o.default.rooms[Math.max(0,e-1)],t)}),this.addWalls()},t.prototype._isFloor=function(t,e){return"floor"===o.default.grid[t][e].type},t.prototype._isDoor=function(t,e){return"door"===o.default.grid[t][e].type},t.prototype._isEdge=function(t,e){return void 0!==o.default.grid[t][e].edge},t.prototype._isValid=function(t,e){return void 0!==o.default.grid[t]&&void 0!==o.default.grid[t][e]},t.prototype._carve=function(t,e){for(var i=t.c,r=e.c,n=Math.min(r.y,i.y);n<=Math.max(r.y,i.y);n++)o.default.grid[n][r.x].room||(o.default.grid[n][r.x]={type:"floor",room:!1,edge:[2,0]});for(var a=Math.min(i.x,r.x);a<=Math.max(i.x,r.x);a++)o.default.grid[i.y][a].room||(o.default.grid[i.y][a]={type:"floor",room:!1,edge:[0,2]})},t.prototype.addWalls=function(){for(var t=this,e=0;e<o.default.gridSize;++e)for(var i=0;i<o.default.gridSize;++i){if(this._isEdge(e,i))[[e-1,i-1],[e-1,i],[e-1,i+1],[e,i-1],[e,i],[e,i+1],[e+1,i-1],[e+1,i],[e+1,i+1]].forEach(function(e){!t._isValid(e[0],e[1])||t._isFloor(e[0],e[1])||t._isDoor(e[0],e[1])||(o.default.grid[e[0]][e[1]]={type:"wall"})})}},t.prototype.draw=function(){o.default.ctx.clearRect(0,0,o.default.canvas.width,o.default.canvas.height);for(var t=0;t<o.default.gridSize;++t)for(var e=0;e<o.default.gridSize;++e){var i=o.default.grid[t][e].type;i&&(this.ctx.fillStyle=this.pattern.get(i),this.ctx.fillRect(o.default.cellSize.w*e,o.default.cellSize.h*t,o.default.cellSize.w,o.default.cellSize.h))}},t}();e.default=u},39:function(t,e,i){"use strict";i.r(e),i.d(e,"Random",function(){return r}),i.d(e,"boxMuller",function(){return n}),i.d(e,"closest",function(){return o}),i.d(e,"lerp",function(){return a}),i.d(e,"distance",function(){return u}),i.d(e,"intersect",function(){return s});class r{constructor(t=Math.random()){this.input=t,this.seed=this._convert(t),this.seed<=0&&(this.seed+=2147483646)}_convert(t){return t.toString().split("").map((e,i)=>t.toString().charCodeAt(i)).join("")%2147483647}getSeed(){return this.input}setSeed(t){this.input=t,this.seed=this._convert(t)}next(){return this.seed=16807*this.seed%2147483647,this.seed}nextFloat(){return(this.next()-1)/2147483646}}function n(t){const e=Math.random(),i=Math.random();return Math.max(Math.min(Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*i),t),-t)}function o(t,e){return Math.ceil(t/e)*e}function a(t,e,i=Math.random()){return(1-i)*t+i*e}function u([t,e],[i,r]){var n=t-i,o=e-r;return sqrt(n*n+o*o)}function s(t,e,i=0){return void 0!==e&&!(e.x>t.x+t.w+i||e.x+e.w+i<t.x||e.y>t.y+t.h+i||e.y+e.h+i<t.y)}},40:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(41)),o=r(i(11)),a=function(){function t(){this.kit=new n.default,this.options={size:[96,128,256,512],selection:null}}return t.prototype.init=function(){this.addUi()},t.prototype.addUi=function(){this.kit.addPanel().addGroup().addSubGroup().addNumberOutput(o.default.pos,"mouseX",{label:"x"}).addSelect(this.options,"size",{label:"size",onChange:function(t){o.default.gridSize=this.options.size[t],o.default.cellSize={w:o.default.width/o.default.gridSize,h:o.default.height/o.default.gridSize},o.default.buildGrid()}.bind(this)})},t}();e.default=a},64:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(11)),o={door:[16,0],wall:[80,0],floor:[160,96]},a=function(){function t(t,e,i,r){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.outerCtx=e||n.default.ctx,this.img=t||n.default.img,this.w=i||16,this.h=r||16,this.sprite=o,this.canvas.width=this.w,this.canvas.height=this.h}return t.prototype.get=function(t){var e=t||"floor";return this.ctx.drawImage(this.img,this.sprite[e][0],this.sprite[e][1],this.w,this.h,0,0,this.w,this.h),this.outerCtx.createPattern(this.canvas,"repeat")},t}();e.default=a},65:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t=1e3/60);var e=this;this.frame=0,this.lastTime=0,this.accumulatedTime=0,this.framerate=t,this.loop=function(i){e.frame+=Math.abs((i-e.lastTime)/t),i>e.lastTime&&(e.lastTime=i,e.update(t)),e.start()}}return t.prototype.stop=function(){cancelAnimationFrame(this.loop)},t.prototype.start=function(){requestAnimationFrame(this.loop)},t}();e.default=r},66:function(t,e,i){},67:function(t,e,i){t.exports=i.p+"img/dungeon.png"},68:function(t,e,i){"use strict";i.r(e);var r=i(36),n=i.n(r);i(11);(new n.a).init();i(66),i(67)}});