!function(t){function i(i){for(var s,n,a=i[0],h=i[1],u=i[2],c=0,l=[];c<a.length;c++)n=a[c],o[n]&&l.push(o[n][0]),o[n]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s]);for(d&&d(i);l.length;)l.shift()();return r.push.apply(r,u||[]),e()}function e(){for(var t,i=0;i<r.length;i++){for(var e=r[i],s=!0,a=1;a<e.length;a++){var h=e[a];0!==o[h]&&(s=!1)}s&&(r.splice(i--,1),t=n(n.s=e[0]))}return t}var s={},o={1:0},r=[];function n(i){if(s[i])return s[i].exports;var e=s[i]={i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)n.d(e,s,function(i){return t[i]}.bind(null,s));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="";var a=window.webpackJsonp=window.webpackJsonp||[],h=a.push.bind(a);a.push=i,a=a.slice();for(var u=0;u<a.length;u++)i(a[u]);var d=h;r.push([38,0]),e()}({36:function(t,i,e){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var o=s(e(39)),r=s(e(42)),n=s(e(44)),a=s(e(6)),h=function(){function t(){var t=this;this.dungeon=null,this.camera=new r.default,this.animate=new n.default,a.default.resize(),a.default.loadImg("./img/dungeon.png",function(){t.init()})}return t.prototype.init=function(){var t=this;a.default.buildGrid(),this.dungeon=new o.default,this.animate.update=function(){a.default.ctx.clearRect(0,0,a.default.canvas.width,a.default.canvas.height),t.camera.update(),t.camera.setHome(),t.camera.setTransform(),t.dungeon.draw()},this.animate.start()},t.prototype.restart=function(){this.dungeon.restart()},t}();i.default=h},38:function(t,i,e){t.exports=e(69)},39:function(t,i,e){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var o=e(40),r=s(e(6)),n=s(e(41)),a=function(){function t(){this.ctx=r.default.canvas.getContext("2d"),this.pattern=new n.default,this.rooms=new Array,this.init()}return t.prototype.init=function(){this.setRooms()},t.prototype.restart=function(){this.init()},t.prototype.setRooms=function(t,i,e){for(var s=this,n=i||40,a=e||100,h=t||10,u=0;u<a;u++){for(var d=Math.floor(o.lerp(10,n)),c=Math.floor(o.lerp(10,n)),l=Math.floor(2*o.lerp(0,(r.default.gridSize-d)/2)+1),f=Math.floor(2*o.lerp(0,(r.default.gridSize-c)/2)+1),m=!1,p={x:l,y:f,w:d,h:c,c:{x:Math.ceil(l+d/2),y:Math.ceil(f+c/2)}},x=0;x<r.default.rooms.length;x++)o.intersect(p,r.default.rooms[x])&&(m=!0);!m&&r.default.rooms.length<h&&r.default.rooms.push(p)}r.default.rooms.forEach(function(t,i){for(var e=t.y;e<t.y+t.h-1;e++)for(var o=e==t.y?-1:e==t.y+t.h-1?1:0,n=t.x;n<t.x+t.w-1;n++){var a=n==t.x?-1:n==t.x+t.w-1?1:0;r.default.grid[e][n]={type:"floor",room:!0,edge:[o,a],index:i}}s._carve(r.default.rooms[Math.max(0,i-1)],t)}),this.addWalls()},t.prototype._isFloor=function(t,i){return"floor"===r.default.grid[t][i].type},t.prototype._isDoor=function(t,i){return"door"===r.default.grid[t][i].type},t.prototype._isEdge=function(t,i){return void 0!==r.default.grid[t][i].edge},t.prototype._isValid=function(t,i){return void 0!==r.default.grid[t]&&void 0!==r.default.grid[t][i]},t.prototype._carve=function(t,i){for(var e=t.c,s=i.c,o=Math.min(s.y,e.y);o<=Math.max(s.y,e.y);o++)r.default.grid[o][s.x].room||(r.default.grid[o][s.x]={type:"floor",room:!1,edge:[2,0]});for(var n=Math.min(e.x,s.x);n<=Math.max(e.x,s.x);n++)r.default.grid[e.y][n].room||(r.default.grid[e.y][n]={type:"floor",room:!1,edge:[0,2]})},t.prototype.addWalls=function(){for(var t=this,i=0;i<r.default.gridSize;++i)for(var e=0;e<r.default.gridSize;++e){if(this._isEdge(i,e))[[i-1,e-1],[i-1,e],[i-1,e+1],[i,e-1],[i,e],[i,e+1],[i+1,e-1],[i+1,e],[i+1,e+1]].forEach(function(i){!t._isValid(i[0],i[1])||t._isFloor(i[0],i[1])||t._isDoor(i[0],i[1])||(r.default.grid[i[0]][i[1]]={type:"wall"})})}},t.prototype.draw=function(){for(var t=0;t<r.default.gridSize;++t)for(var i=0;i<r.default.gridSize;++i){var e=r.default.grid[t][i].type;e&&(this.ctx.fillStyle=this.pattern.get(e),this.ctx.fillRect(r.default.cellSize.w*i,r.default.cellSize.h*t,r.default.cellSize.w,r.default.cellSize.h))}},t}();i.default=a},40:function(t,i,e){"use strict";e.r(i),e.d(i,"Random",function(){return s}),e.d(i,"boxMuller",function(){return o}),e.d(i,"closest",function(){return r}),e.d(i,"lerp",function(){return n}),e.d(i,"distance",function(){return a}),e.d(i,"intersect",function(){return h});class s{constructor(t=Math.random()){this.input=t,this.seed=this._convert(t),this.seed<=0&&(this.seed+=2147483646)}_convert(t){return t.toString().split("").map((i,e)=>t.toString().charCodeAt(e)).join("")%2147483647}getSeed(){return this.input}setSeed(t){this.input=t,this.seed=this._convert(t)}next(){return this.seed=16807*this.seed%2147483647,this.seed}nextFloat(){return(this.next()-1)/2147483646}}function o(t){const i=Math.random(),e=Math.random();return Math.max(Math.min(Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*e),t),-t)}function r(t,i){return Math.ceil(t/i)*i}function n(t,i,e=Math.random()){return(1-e)*t+e*i}function a([t,i],[e,s]){var o=t-e,r=i-s;return sqrt(o*o+r*r)}function h(t,i,e=0){return void 0!==i&&!(i.x>t.x+t.w+e||i.x+i.w+e<t.x||i.y>t.y+t.h+e||i.y+i.h+e<t.y)}},41:function(t,i,e){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var o=s(e(6)),r={door:[16,0],wall:[80,0],floor:[160,96]},n=function(){function t(t,i,e,s){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.outerCtx=i||o.default.ctx,this.img=t||o.default.img,this.w=e||16,this.h=s||16,this.sprite=r,this.canvas.width=this.w,this.canvas.height=this.h}return t.prototype.get=function(t){var i=t||"floor";return this.ctx.drawImage(this.img,this.sprite[i][0],this.sprite[i][1],this.w,this.h,0,0,this.w,this.h),this.outerCtx.createPattern(this.canvas,"repeat")},t}();i.default=n},42:function(t,i,e){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var o=s(e(43)),r=s(e(6)),n=function(){function t(){this.x=0,this.y=0,this.ox=0,this.oy=0,this.scale=1,this.rotate=0,this.cx=0,this.cy=0,this.cox=0,this.coy=0,this.cscale=1,this.crotate=0,this.dx=0,this.dy=0,this.dox=0,this.doy=0,this.dscale=1,this.drotate=0,this.drag=.1,this.accel=2,this.matrix=[0,0,0,0,0,0],this.invMatrix=[0,0,0,0,0,0],this.mouse=new o.default,this.mouseX=0,this.mouseY=0,this.mouse.bind(r.default.canvas)}return t.prototype.setTransform=function(){var t=this.matrix,i=0;r.default.ctx.setTransform(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++])},t.prototype.setHome=function(){r.default.ctx.setTransform(1,0,0,1,0,0)},t.prototype.update=function(){this.dx+=(this.x-this.cx)*this.accel,this.dy+=(this.y-this.cy)*this.accel,this.dox+=(this.ox-this.cox)*this.accel,this.doy+=(this.oy-this.coy)*this.accel,this.dscale+=(this.scale-this.cscale)*this.accel,this.drotate+=(this.rotate-this.crotate)*this.accel,this.dx*=this.drag,this.dy*=this.drag,this.dox*=this.drag,this.doy*=this.drag,this.dscale*=this.drag,this.drotate*=this.drag,this.cx+=this.dx,this.cy+=this.dy,this.cox+=this.dox,this.coy+=this.doy,this.cscale+=this.dscale,this.crotate+=this.drotate,this.matrix[0]=Math.cos(this.crotate)*this.cscale,this.matrix[1]=Math.sin(this.crotate)*this.cscale,this.matrix[2]=-this.matrix[1],this.matrix[3]=this.matrix[0],this.matrix[4]=-(this.cx*this.matrix[0]+this.cy*this.matrix[2])+this.cox,this.matrix[5]=-(this.cx*this.matrix[1]+this.cy*this.matrix[3])+this.coy;var t=this.matrix[0]*this.matrix[3]-this.matrix[1]*this.matrix[2];if(this.invMatrix[0]=this.matrix[3]/t,this.invMatrix[1]=-this.matrix[1]/t,this.invMatrix[2]=-this.matrix[2]/t,this.invMatrix[3]=this.matrix[0]/t,void 0!==this.mouse){if(void 0!==this.mouse.oldX&&1==(1&this.mouse.buttonRaw)){var i=this.mouse.x-this.mouse.oldX,e=this.mouse.y-this.mouse.oldY,s=i*this.invMatrix[0]+e*this.invMatrix[2],o=i*this.invMatrix[1]+e*this.invMatrix[3];this.x-=s,this.y-=o}void 0!==this.mouse.w&&0!==this.mouse.w&&(this.ox=this.mouse.x,this.oy=this.mouse.y,this.x=this.mouseX,this.y=this.mouseY,this.mouse.w>0&&(this.scale*=1.1,this.mouse.w-=20,this.mouse.w<0&&(this.mouse.w=0)),this.mouse.w<0&&(this.scale*=1/1.1,this.mouse.w+=20,this.mouse.w>0&&(this.mouse.w=0)));var n=this.mouse.x-this.cox,a=this.mouse.y-this.coy;this.mouseX=this.cx+(n*this.invMatrix[0]+a*this.invMatrix[2]),this.mouseY=this.cy+(n*this.invMatrix[1]+a*this.invMatrix[3]),this.mouse.rx=this.mouseX,this.mouse.ry=this.mouseY,this.mouse.oldX=this.mouse.x,this.mouse.oldY=this.mouse.y}r.default.pos={x:this.x,y:this.y,scale:this.scale,mouseX:this.mouseX,mouseY:this.mouseY}},t}();i.default=n},43:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(){this.x=0,this.y=0,this.w=0,this.alt=!1,this.shift=!1,this.ctrl=!1,this.buttonLastRaw=0,this.buttonRaw=0,this.over=!1,this.buttons=[1,2,4,6,5,3]}return t.prototype.bind=function(t){t.addEventListener("mousemove",this.mouse.bind(this)),t.addEventListener("mousedown",this.mouse.bind(this)),t.addEventListener("mouseup",this.mouse.bind(this)),t.addEventListener("mouseout",this.mouse.bind(this)),t.addEventListener("mouseover",this.mouse.bind(this)),t.addEventListener("mousewheel",this.mouse.bind(this)),t.addEventListener("DOMMouseScroll",this.mouse.bind(this)),t.addEventListener("contextmenu",function(t){t.preventDefault()},!1)},t.prototype.mouse=function(t){this.x=t.offsetX,this.y=t.offsetY,void 0===this.x&&(this.x=t.clientX,this.y=t.clientY),this.alt=t.altKey,this.shift=t.shiftKey,this.ctrl=t.ctrlKey,"mousedown"===t.type?(t.preventDefault(),this.buttonRaw|=this.buttons[t.which-1]):"mouseup"===t.type?this.buttonRaw&=this.buttons[t.which+2]:"mouseout"===t.type?(this.buttonRaw=0,this.over=!1):"mouseover"===t.type?this.over=!0:"mousewheel"===t.type?(t.preventDefault(),this.w=t.wheelDelta):"DOMMouseScroll"===t.type&&(this.w=-t.detail)},t}();i.default=s},44:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t){void 0===t&&(t=1e3/120);var i=this;this.frame=0,this.lastTime=0,this.framerate=t,this.loop=function(e){i.frame+=Math.round((e-i.lastTime)/t),i.lastTime=e,i.update(),i.start()}}return t.prototype.stop=function(){cancelAnimationFrame(this.loop)},t.prototype.start=function(){requestAnimationFrame(this.loop)},t}();i.default=s},6:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=new(function(){function t(){this.canvas=document.querySelector("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=window.innerWidth,this.height=window.innerHeight,this.img=new Image,this.gridSize=98,this.cellSize={w:this.width/this.gridSize,h:this.height/this.gridSize},this.rooms=new Array,this.grid=new Array,this.pos={x:0,y:0,scale:0,mouseX:0,mouseY:0}}return t.prototype.resize=function(t,i){void 0===t&&(t=window.innerWidth),void 0===i&&(i=window.innerHeight),this.width=t,this.height=i,this.canvas.width=t,this.canvas.height=i},t.prototype.buildGrid=function(){for(var t=0;t<s.gridSize;++t){this.grid[t]=new Array;for(var i=0;i<s.gridSize;++i)this.grid[t][i]=0}},t.prototype.loadImg=function(t,i){var e=this,s=new Image;s.src=t,s.onload=function(){e.img=s,i()}},t}());i.default=s},67:function(t,i,e){},68:function(t,i,e){t.exports=e.p+"img/dungeon.png"},69:function(t,i,e){"use strict";e.r(i);var s=e(36),o=e.n(s),r=e(37),n=e.n(r),a=e(6),h=e.n(a);window.addEventListener("load",function(){var t={options:[96,128,256,512],selection:null};t.selection=t.options[0],(new n.a).addPanel().addGroup().addSubGroup().addNumberOutput(h.a.pos,"mouseX",{label:"x"}).addSelect(t,"options",{label:"size",onChange:function(i){h.a.gridSize=t.options[i],h.a.cellSize={w:h.a.width/h.a.gridSize,h:h.a.height/h.a.gridSize},h.a.buildGrid(),u.init()}})});const u=new o.a;e(67),e(68)}});